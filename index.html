<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Web components test</title>

        <style>
            body {
                margin: 40px 0 0;
                font-family: sans-serif;
            }
            .container {
                width: 1000px;
                padding: 0 10px;
                margin: 0 auto;
                box-sizing: border-box;
            }
            .code {
                font-family: courier;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <bc-button>Secondary button</bc-button>
            <br>
            <bc-button primary>Primary button</bc-button>
            <br>
            <bc-button url="https://www.audible.com">Button with URL</bc-button>
        </div>

        <script>
            const buttonRootTemplate = `
                <style>
                    :host {
                        all: initial;
                        contain: content;
                    }

                    :host button {
                        background-color: lightgray;
                        border: none;
                        border-radius: 1px;
                        padding: 20px;
                        cursor: pointer;
                    }

                    :host button:hover {
                        background-color: #e0e0e0;
                    }

                    :host([primary]) button {
                        background-color: darkorange;
                    }
                    :host([primary]) button:hover {
                        background-color: orange;
                    }
                </style>`;

            const buttonTemplate = `<button><slot></slot></button>`;
            const linkTemplate = `<a href=""><slot></slot></a>`;

            class BCButton extends HTMLElement {
                static get observedAttributes() {
                    return ['primary'];
                }

                constructor() {
                    super();

                    const shadowRoot = this.attachShadow({ mode: 'open' });
                    const url = this.getAttribute('url');

                    console.log(url);
                    const template = document.createElement('template');

                    if (url) {
                        template.innerHTML = buttonRootTemplate + linkTemplate;
                    } else {
                        template.innerHTML = buttonRootTemplate + buttonTemplate;
                    }

                    shadowRoot.appendChild(template.content.cloneNode(true));

                    if (url) {
                        shadowRoot.querySelector('a').setAttribute('href', url);
                    }
                }

                attributeChangedCallback(attrName, oldVal, newVal) {
                    console.log(`attrName: ${attrName}, oldVal: ${oldVal}, newVal: ${newVal}`);
                }
            }

            window.customElements.define('bc-button', BCButton);
        </script>
    </body>
</html>